<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Speak and Spell - English Learning</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="../../css/styles.css" rel="stylesheet" />
</head>
<body>
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-light" id="mainNav">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand" href="../../../index.html">Speak and Spell</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto py-4 py-lg-0">
                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="../../../index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="#section">Section</a></li>
                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Page Header-->
    <header class="masthead" style="background-image: url('../../../assets/img/section/thumbnails/3.jpg')">
        <div class="container position-relative px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-10 col-lg-8 col-xl-7">
                    <div class="site-heading">
                        <h1>Improve Your Speaking and Spelling</h1>
                        <span class="subheading">Are you looking to improve your English speaking and spelling skills? Look no further! We have a range of interactive activities to help you.</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Main Content-->
    <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-12">
                <!-- Speaking Exercise-->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5>Speaking Exercise: Introductions</h5>
                    </div>
                    <div class="card-body">
                        <p>Practise your speaking skills by recording and listening back to yourself introducing yourself in English. Click the 'Record' button to start recording, and the 'Stop' button to stop recording. You can listen back to yourself by clicking the 'Play' button.</p>
                        <div class="row">
                            <div class="col">
                                <div class="input-group mb-3">
                                    <button type="button" class="btn btn-secondary" id="recordButton">Record</button>
                                    <button type="button" class="btn btn-secondary" id="stopButton" disabled>Stop</button>
                                    <button type="button" class="btn btn-secondary" id="playButton" disabled>Play</button>
                                </div>
                                <audio id="audioPlayer" controls></audio>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Spelling Exercise-->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5>Spelling Exercise: Speak and Spell</h5>
                    </div>
                    <div class="card-body">
                        <p>In this exercise, you will listen to a word being spoken, and then type the word in the box below. The spelling will be checked, and you will be given feedback on whether your spelling is correct or not. Try to beat your high score!</p>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <input type="text" class="form-control" id="wordInput" placeholder="Type the word here" />
                                </div>
                                <button type="submit" class="btn btn-primary" id="playWordButton">Play Word</button>
                                <button type="submit" class="btn btn-primary" id="checkButton">Check Spelling</button>
                                <div class="alert alert-danger mt-2" role="alert" id="incorrectAlert" style="display: none;">
                                    Incorrect spelling, try again!
                                </div>
                                <div class="alert alert-success mt-2" role="alert" id="correctAlert" style="display: none;">
                                    Correct spelling!
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    <!-- Footer-->
    <footer class="border-top">
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-10 col-lg-8 col-xl-7">
                    <div class="small text-center text-muted fst-italic">Copyright &copy; Speak and Spell 2024</div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz4fnFO9gybBud7TlRbs/ic4AwGcFZOxg5DpPt8EgeUIgIwzjWfXQKWA3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHg7Tl21G0S+7Jpt3E1jEEe3iq+CjExF3DZqj8nTP/UWJj62y" crossorigin="anonymous"></script>
    <script src="../../../js/scripts.js"></script>
    <script>
        // Recording functionality
        let recording = false;
        let mediaRecorder;
        let recordedChunks = [];
        const recordButton = document.getElementById('recordButton');
        const stopButton = document.getElementById('stopButton');
        const playButton = document.getElementById('playButton');
        const audioPlayer = document.getElementById('audioPlayer');

        recordButton.addEventListener('click', () => {
            navigator.mediaDevices.getUserMedia({ audio: true })
                .then(stream => {
                    mediaRecorder = new MediaRecorder(stream);
                    mediaRecorder.start();
                    recordedChunks = [];
                    recordButton.disabled = true;
                    stopButton.disabled = false;
                    playButton.disabled = true;

                    mediaRecorder.addEventListener('dataavailable', event => {
                        if (event.data.size > 0) {
                            recordedChunks.push(event.data);
                        }
                    });

                    mediaRecorder.addEventListener('stop', () => {
                        const audioBlob = new Blob(recordedChunks);
                        audioPlayer.src = URL.createObjectURL(audioBlob);
                        playButton.disabled = false;
                    });
                })
                .catch(error => {
                    console.error('Error accessing audio media devices.', error);
                });
        });

        stopButton.addEventListener('click', () => {
            mediaRecorder.stop();
            recordButton.disabled = false;
            stopButton.disabled = true;
        });

        playButton.addEventListener('click', () => {
            audioPlayer.play();
        });

    const playWordButton = document.getElementById('playWordButton');
    const checkButton = document.getElementById('checkButton');
    const wordInput = document.getElementById('wordInput');
    const correctAlert = document.getElementById('correctAlert');
    const incorrectAlert = document.getElementById('incorrectAlert');

    const words = ['spell', 'learn', 'speak', 'read', 'write'];
    let currentWordIndex = 0;

    playWordButton.addEventListener('click', () => {
        const word = words[currentWordIndex];
        const utterance = new SpeechSynthesisUtterance(word);
        speechSynthesis.speak(utterance);
    });

    checkButton.addEventListener('click', () => {
        const typedWord = wordInput.value.trim().toLowerCase();
        if (typedWord === words[currentWordIndex]) {
            correctAlert.style.display = 'block';
            incorrectAlert.style.display = 'none';
            currentWordIndex = (currentWordIndex + 1) % words.length;
        } else {
            correctAlert.style.display = 'none';
            incorrectAlert.style.display = 'block';
        }
        wordInput.value = '';
    });
</script>
</body>
</html>
